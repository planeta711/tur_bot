<test>

    <test-case id="1">
        <q>/start</q>
         <!--На старте машина представляется ботом туристической компании Just Tour-->
        <a>Здравствуйте, я Мария, бот туристической компании Just Tour.</a>
        <!--... и рассказывает о проблемах, в решении которых она может помочь-->
        <a>Я расcказываю о погоде в разных городах мира и могу оформить заявку на подбор тура.</a>
        <!--...после этого бот побуждате пользователя продолжить диалог-->
        <a>Что Вас интересует?</a>
        <q>Оформи заявку на тур</q>
        <!--Если пользователь хочет оформить заявку... бот спрашивает, в какой город/страну пользователю хочется отправиться-->
        <a>В какой город или страну хотите поехать?</a>
        <q>Испания</q>
        <a>Записала, Испания</a>
        <a>Для оформления заявки я задам вам несколько вопросов.</a>
        <!--Для заполнения заявки бот выясняет у пользователя - имя пользователя -->
        <a>Обязательными будут только Ваше имя и телефон.</a>
        <a>Пожалуйста, введите Ваше имя</a>
        <q>Саша</q>
        <a>Саша, приятно познакомиться!</a>
        <a>Пожалуйста, введите номер Вашего телефона в формате 8-123-456-7890.</a>
        <q>8-900-000-0000</q>
        <a>8-900-000-0000 внесла в заявку</a>
        <!--Для заполнения заявки бот выясняет у пользователя - дату начала поездки-->
        <a>Назовите дату начала поездки. Можно примерно</a>
    </test-case>
    
    <test-case id="2">
        <context var="client">
            {
                "name": "Антон"
            }
        </context>
        <q>/start</q>
        <!--Если пользователь уже общался с ботом и представлялся, на старте машина обращается по имени-->
        <a>Здравствуйте, Антон. Это Мария, бот Just Tour.</a>
        <a>Я расcказываю о погоде в разных городах мира и могу оформить заявку на подбор тура.</a>
        <a>Что Вас интересует?</a>
        <q>Оформи заявку на тур</q>
        <a>В какой город или страну хотите поехать?</a>
        <!--Если пользователь не определился со страной, бот начинает заполнение заявки, объявив, что с подбором поможет менеджер-->
        <q>Не знаю</q>
        <a>Не проблема. Заполним заявку, а менеджер поможет Вам выбрать направление</a>
        <a>Для оформления заявки я задам вам несколько вопросов.</a>
        <!--Для заполнения заявки бот выясняет у пользователя - номер телефона -->
        <a>Пожалуйста, введите номер Вашего телефона в формате 8-123-456-7890.</a>
        <!--Заявка не отправляется без телефона пользователя-->
        <q>Не хочу</q>
        <a>Без номера телефона я не могу принять заявку на тур. Давайте попробуем ещё раз.</a>
        <a>Пожалуйста, введите номер Вашего телефона в формате 8-123-456-7890.</a>
        <q>Не хочу</q>
        <a>Вижу, Вы не хотите сообщать номер, а мне без него не принять заявку. Введёте номер или отменим заявку?</a>
    </test-case>
    
    <test-case id="3">
     <!--Если пользователь из любой точки диалога задает вопрос, цель которого узнать погоду...-->
        <!--Запрос погоды из стейта /Name -->
        <q>/start</q>
        <a>Здравствуйте, я Мария, бот туристической компании Just Tour.</a>
        <a>Я расcказываю о погоде в разных городах мира и могу оформить заявку на подбор тура.</a>
        <a>Что Вас интересует?</a>
        <q>Расскажи о погоде</q>
        <a>Где смотрим погоду? Назовите город или страну</a>
        <!--Запрос погоды из стейта /Menu -->
        <state>/Menu/Choose</state>
        <q>Расскажи о погоде</q>
        <a>Где смотрим погоду? Назовите город или страну</a>
        <!--Запрос погоды из стейта /Wheather -->
        <state>/Weather/Step5</state>
        <q>Расскажи о погоде</q>
        <a>Где смотрим погоду? Назовите город или страну</a>
        <!--Запрос погоды из стейта /Trip -->
        <state>/Trip/Step2</state>
        <q>Расскажи о погоде</q>
        <a>Где смотрим погоду? Назовите город или страну</a>
    </test-case>

    
    <test-case id="4" integration="true">
        <context var="session">
            {
                "date": {"year": "2023", "month": "1", "day": "1", "timestamp": 1672531200000}
            }
        </context>
        <dateTime>2022-11-22 12:00:00</dateTime>
        <state>/Menu/Begin</state>
        <q>Погода</q>
        <!--...бот проверяет, что в предыдущем диалоге присутствуют указания на дату (1 января)-->
        <!--Недостающие параметры уточняются ботом в последующем диалоге с пользователем-->
        <a>Где смотрим погоду? Назовите город или страну</a>
        <q>Москва</q>
        <a>Вы запросили погоду на 1 января. Не могу посмотреть прогноз дальше, чем 16 дней. Узнать, какая была погода 1 января прошлого года?</a>
        <q>Да</q>
        <a>Погода в Москве в прошлом году на 1 января была: -0.3°C. Ветер 3.5 м/с, порывы до 5.6 м/с.</a>
        <!--Если температура воздуха низкая, задается вопрос, действительно ли ... поездку с холодным климатом-->
        <a>Вы действительно планируете поездку в страну с холодным климатом?</a>
        <q>Да</q>
        <a>Давайте оформим заявку на тур в Москву?</a>
        <!--Если пользователь отвечает утвердительно, бот предлагает оформить тур в страну, которой человек интересовался-->
        <q>Давайте</q>
        <!--Если пользователь хочет оформить тур, из диалога о погоде: сразу переходим к заполнению заявки-->
        <a>Для оформления заявки я задам вам несколько вопросов.</a> 
        <a>Обязательными будут только Ваше имя и телефон.</a>
        <!--Для заполнения заявки бот выясняет у пользователя - имя пользователя-->
        <a>Пожалуйста, введите Ваше имя</a> 
        <!--Заявка не отправляется без имени пользователя-->
        <q>Не хочу</q> 
        <a>Без имени я не могу принять заявку на тур. Давайте попробуем ещё раз.</a> 
        <a>Пожалуйста, введите Ваше имя</a> 
    
    </test-case>   
        
    <test-case id="5" integration="true">
        <context var="session"> 
            {
                "place": {"type": "city", "name": "Анкара"},
                "coordinates": {"lat": "39.91987", "lon": "32.85427"},
                "date": {"year": "2023", "month": "7", "day": "2", "timestamp": 1688256000000},
                "tripStep": "/Trip/Step4"
            }
        </context>
        <dateTime>2022-11-22 12:00:00</dateTime>
        <state>/Menu/Begin</state>
        <q>Погода</q>
        <!--...бот проверяет, что в предыдущем диалоге присутствуют указания на город (Анкара), дату (2 июля)-->
        <a>Вы запросили погоду на 2 июля. Не могу посмотреть прогноз дальше, чем 16 дней. Узнать, какая была погода 2 июля прошлого года?</a>
        <q>Да</q>
        <a>Погода в Анкаре в прошлом году на 2 июля была: 28.7°C. Ветер 1.7 м/с, порывы до 6.5 м/с.</a>
        <!--Если температура воздуха высокая, задается вопрос, действительно ли ... поездку с жарким климатом-->
        <a>Вы действительно планируете поездку в страну с жарким климатом?</a>
        <q>Да</q>
        <!--Если пользователь отвечает утвердительно, бот предлагает продолжить оформление уже начатой заявки-->
        <a>Продолжим оформление заявки на тур?</a>
        <q>Да</q>
        <!--При продолжении с начатой заявкой названные пользователем параметры заявки спрашивать не надо-->
        <!--Для заполнения заявки бот выясняет у пользователя - длительность поездки-->
        <a>Выберите длительность поездки</a>
        <q>до 7 дней</q>
        <!--Для заполнения заявки бот выясняет у пользователя - количество людей в поездке-->
        <a>Сколько всего человек будет в поездке включая детей?</a>
        <q>пять</q>
        <!--Для заполнения заявки бот выясняет у пользователя - количество детей в поездке-->
        <a>Сколько из них детей младше 14 лет?</a>
        <q>нисколько</q>
        <!--Для заполнения заявки бот выясняет у пользователя - бюджет поездки-->
        <a>Какой примерно бюджет поездки из расчета на одного взрослого?</a>
        <q>50 тыс.руб.</q>
        <!--Для заполнения заявки бот выясняет у пользователя - желаемую звездность отеля-->
        <a>Какой хотите минимальный уровень звездности отеля?</a>
        <q>три звезды</q>
        <!--Для заполнения заявки бот выясняет у пользователя - комментарий для менеджера в свободной форме-->
        <a>Что-то еще передать менеджеру? Может, какие-то пожелания?</a>
        
    </test-case>


    <test-case id="6" integration="true">
        <context var="session"> 
            {
                "place": {"type": "city", "name": "Москва"},
                "coordinates": {"lat": "55.75222", "lon": "37.61556"}
            }
        </context>
        <state>/Menu/Begin</state>
        <q>Погода</q>
        <!--...бот проверяет, что в предыдущем диалоге присутствуют указания на город (Москва)-->
        <a>На какую дату смотрим прогноз погоды?</a>
        <q>9 мая</q>
        <a>Вы запросили погоду на 9 мая. Не могу посмотреть прогноз дальше, чем 16 дней. Узнать, какая была погода 9 мая прошлого года?</a>
        <q>Да</q>
        <a>Погода в Москве в прошлом году на 9 мая была: 6.8°C. Ветер 5.3 м/с, порывы до 12 м/с.</a>
        <!--Если температура воздуха средняя, задается вопрос, действительно ли ... поездку с умеренным климатом-->
        <a>Вы действительно планируете поездку в страну с умеренным климатом?</a>
        <!--Если пользователь в запросе изменяет параметры прогноза (например, "а в сочи?") выводится погода для новых данных-->
        <q>а в сочи?</q>
        <a>Сочи? Сейчас узнаю какая там погода.</a>
        <a>Вы запросили погоду на 9 мая. Не могу посмотреть прогноз дальше, чем 16 дней. Узнать, какая была погода 9 мая прошлого года?</a>
        <q>Да</q>
        <!--После получения всех параметров бот отправляет данные в третью систему и выдает пользователю прогноз погоды-->
        <a>Погода в Сочи в прошлом году на 9 мая была: 12.8°C. Ветер 4.3 м/с, порывы до 16 м/с.</a>
        <a>Вы действительно планируете поездку в страну с умеренным климатом?</a>
        <!--Если пользователь в запросе изменяет параметры прогноза (например, "а 1 января?") выводится погода для новых данных-->
        <q>а 1 января?</q>
        <a>Вы запросили погоду на 1 января. Не могу посмотреть прогноз дальше, чем 16 дней. Узнать, какая была погода 1 января прошлого года?</a>
        <q>Да</q>
        <a>Погода в Сочи в прошлом году на 1 января была: 10°C. Ветер 4.7 м/с, порывы до 8.2 м/с.</a>
        <a>Вы действительно планируете поездку в страну с умеренным климатом?</a>
        <!--Если пользователь отвечает отрицательно, бот предлагает узнать погоду в другой стране или городе-->
        <q>Нет</q>
        <a>Давайте посмотрим климат в другом месте?</a>
    </test-case>
    
    <test-case id="7" integration="true">
        <context var="client">
            {
                "name": "Антон"
            }
        </context>
        <dateTime>2022-11-22 12:00:00</dateTime>
        <!--Если пользователь из любой точки диалога задает вопрос, цель которого узнать погоду...-->
        <!--...бот проверяет, что в запросе есть указания на город/страну-->
        <q>/start</q>
        <a>Здравствуйте, Антон. Это Мария, бот Just Tour.</a>
        <a>Я расcказываю о погоде в разных городах мира и могу оформить заявку на подбор тура.</a>
        <a>Что Вас интересует?</a>
        <q>Прогноз погоды в Токио</q>
        <a>На какую дату смотрим прогноз погоды?</a>
        <!--...бот проверяет, что в запросе есть указания на дату-->
        <q>/start</q>
        <a>Здравствуйте, Антон. Это Мария, бот Just Tour.</a>
        <a>Я расcказываю о погоде в разных городах мира и могу оформить заявку на подбор тура.</a>
        <a>Что Вас интересует?</a>
        <q>Погода на завтра</q>
        <a>Где смотрим погоду? Назовите город или страну</a>
        <!--...бот проверяет, что в запросе есть указания на город/страну и дату-->
        <q>/start</q>
        <a>Здравствуйте, Антон. Это Мария, бот Just Tour.</a>
        <a>Я расcказываю о погоде в разных городах мира и могу оформить заявку на подбор тура.</a>
        <a>Что Вас интересует?</a>
        <q>Прогноз погоды на 1 января в москве</q>
        <a>Вы запросили погоду на 1 января. Не могу посмотреть прогноз дальше, чем 16 дней. Узнать, какая была погода 1 января прошлого года?</a>
        <q>Да</q>
        <a>Погода в Москве в прошлом году на 1 января была: -0.3°C. Ветер 3.5 м/с, порывы до 5.6 м/с.</a>
        <a>Вы действительно планируете поездку в страну с холодным климатом?</a>
    </test-case>

    <test-case id="8" integration="true">
        <context var="session"> 
            {
                "tripPlace": {"type": "city", "name": "Анкара"},
                "coordinates": {"lat": "39.91987", "lon": "32.85427"},
                "date": {"year": "2023", "month": "7", "day": "2", "timestamp": 1688256000000},
                "tripStep": "/Trip/Step4"
            }
        </context>
        <dateTime>2022-11-22 12:00:00</dateTime>
        <state>/Menu/Begin</state>
        <q>Погода</q>
        <a>Вы запросили погоду на 2 июля. Не могу посмотреть прогноз дальше, чем 16 дней. Узнать, какая была погода 2 июля прошлого года?</a>
        <q>Да</q>
        <a>Погода в Анкаре в прошлом году на 2 июля была: 28.7°C. Ветер 1.7 м/с, порывы до 6.5 м/с.</a>
        <a>Вы действительно планируете поездку в страну с жарким климатом?</a>
        <q>А в Москве?</q>
        <a>Москва? Сейчас узнаю какая там погода.</a>
        <a>Вы запросили погоду на 2 июля. Не могу посмотреть прогноз дальше, чем 16 дней. Узнать, какая была погода 2 июля прошлого года?</a>
        <q>Да</q>
        <a>Погода в Москве в прошлом году на 2 июля была: 20°C. Ветер 2.8 м/с, порывы до 5.6 м/с.</a>
        <a>Вы действительно планируете поездку в страну с умеренным климатом?</a>
        <q>Да, планирую</q>
        <!--Если пользователь отвечает утвердительно, бот предлагает оформить тур в страну, которой человек интересовался-->
        <!--или продолжить оформление уже начатой заявки если таковая имеется-->
        <a>Продолжим оформлять тур в Анкару или начнём новую заявку в Москву?</a>
    </test-case>
    
</test> 